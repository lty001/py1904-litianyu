{% extends 'fruitmall/base.html' %}
{% block title %}
<title>产品信息</title>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="/static/css/common.css" type="text/css" media="all"/>
<link rel="stylesheet" href="/static/css/product.css" type="text/css" media="all"/>
<script type="text/javascript" src="/static/js/jquery.js"></script>
<script type="text/javascript" src="/static/js/slider.js"></script>

<!----------商品图片放大---------->
<link rel="stylesheet" type="text/css" href="/static/css/lrtk.css">
<script src="/static/js/MagicZoom.js" type="text/javascript"></script>
<!----------商品图片放大---------->
{% endblock %}

{% block container %}
<div id="container">
    <div id="nav-side">
        <div class="login-container">
                <p class="login-btn">
                    <a href="{% url 'fruitmall:login' %}"><img src="/static/img/btn-login.gif" width="61" height="19" alt="登入"/></a>
                    <a href="{% url 'fruitmall:regist' %}"><img src="/static/img/btn-regist.gif" width="61" height="19" alt="注册"/></a>
                </p>
        </div>
        <div class="login-container">
            <dl class="login-suc">
                <dt><img src="/static/img/img-photo.jpg" width="62" height="62" alt="头像"/></dt>
                <dd>
                    {% if account %}
                        <p class="user-name">{{account}},</p>
                        <p>您好！</p>
                        <button><a href="{% url 'fruitmall:logout' %}">退出</a></button>
                    {% else %}
                        <p>尚未登陆！</p>
                        <button><a href="{% url 'fruitmall:login' %}">登录</a></button>
                    {% endif %}
                </dd>
            </dl>
            <p class="my-fujia"><a href="{% url 'fruitmall:record' %}"><img src="/static/img/btn-personal.gif" width="89" height="21" alt="我的芙佳"/></a></p>
        </div>
        <div class="pro-kinds">
            <h1 class="kinds-tit">产品分类</h1>
            <div class="kinds-cont">
                <div class="kinds-det" style="height: 370px">
                    <h2 class="det-tit">新鲜水果</h2>
                    <div class="det-content">
                        {% for g in goods %}
                        <a href="{% url 'fruitmall:details' g.id %}">{{g.name}}</a>
                        {% endfor %}
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div class="kinds-det" style="height: 370px">
                    <h2 class="det-tit">有机蔬菜</h2>
                    <div class="det-content">
                        {% for g in goods %}
                        <a href="{% url 'fruitmall:details' g.id %}">{{g.name}}</a>
                        {% endfor %}
                        <div style="clear: both;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hot-sale" style="height: 610px;overflow: hidden">
            <h1 class="hot-tit">热卖商品</h1>
            <div class="hot-cont">
                <ul class="hot-list">
                    {% for g in goods %}
                        <li>
                            <p><a href="{% url 'fruitmall:details' g.id %}"><img src="/media/{{g.img}}" width="136" height="112" alt="安岳柠檬"/></a></p>
                            <p class="hot-name"><a href="{% url 'fruitmall:details' g.id %}">{{g.name}} <span>RMB:{{g.price}}</span></a></p>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    <div id="content">
        <div class="pro-detail">
            {% for g in goods %}
            <div class="pro-img">
                <div id="tsShopContainer">
                    <div id="tsImgS">
                        <a href="/static/img/01.jpg" title="Images" class="MagicZoom" id="MagicZoom"><img
                                width="300" height="300" src="/static/img/01.jpg"/></a>
                    </div>
                    <div id="tsPicContainer">
                        <div id="tsImgSArrL" onclick="tsScrollArrLeft()"></div>
                        <div id="tsImgSCon">
                            <ul>
                                <li onclick="showPic(0)" rel="MagicZoom" class="tsSelectImg"><img height="42" width="42" src="/static/img/01.jpg" tsImgS="/static/img/01.jpg"/>
                                </li>
                                <li onclick="showPic(1)" rel="MagicZoom"><img height="42" width="42" src="/static/img/02.png" tsImgS="/static/img/02.png"/></li>
                                <li onclick="showPic(2)" rel="MagicZoom"><img height="42" width="42" src="/static/img/03.jpg" tsImgS="/static/img/03.jpg"/></li>
                                <li onclick="showPic(3)" rel="MagicZoom"><img height="42" width="42" src="/static/img/04.jpg" tsImgS="/static/img/04.jpg"/></li>
                                <li onclick="showPic(4)" rel="MagicZoom"><img height="42" width="42" src="/static/img/05.jpg" tsImgS="/static/img/05.jpg"/></li>
                                <li onclick="showPic(5)" rel="MagicZoom"><img height="42" width="42" src="/static/img/06.jpg" tsImgS="/static/img/06.jpg"/></li>
                                <li onclick="showPic(6)" rel="MagicZoom"><img height="42" width="42" src="/static/img/07.jpg" tsImgS="/static/img/07.jpg"/></li>
                                <li onclick="showPic(7)" rel="MagicZoom"><img height="42" width="42" src="/static/img/08.jpg" tsImgS="/static/img/08.jpg"/></li>
                                <li onclick="showPic(8)" rel="MagicZoom"><img height="42" width="42" src="/static/img/09.jpg" tsImgS="/static/img/09.jpg"/></li>
                                <li onclick="showPic(9)" rel="MagicZoom"><img height="42" width="42" src="/static/img/10.gif" tsImgS="/static/img/10.gif"/></li>
                                <li onclick="showPic(10)" rel="MagicZoom"><img height="42" width="42" src="/static/img/11.gif" tsImgS="/static/img/11.gif"/></li>
                                <li onclick="showPic(10)" rel="MagicZoom"><img height="42" width="42" src="/static/img/11.gif" tsImgS="/static/img/11.gif"/></li>
                                <li onclick="showPic(10)" rel="MagicZoom"><img height="42" width="42" src="/static/img/11.gif" tsImgS="/static/img/11.gif"/></li>
                            </ul>
                        </div>
                        <div id="tsImgSArrR" onclick="tsScrollArrRight()"></div>
                    </div>
                    <img class="MagicZoomLoading" width="16" height="16" src="/static/img/loading.gif"
                         alt="Loading..."/>
                </div>
                <script src="/static/js/ShopShow.js"></script>
            </div>
            <div class="text-container">
                <h1>{{g.name}}</h1>
                <p class="pro-text">{{g.desc}}</p>
                <div class="pro-price">
                    <dl>
                        <dt>促销价</dt>
                        <dd class="low-price">￥{{g.price}}</dd>
                    </dl>
                    <dl>
                        <dt>原价</dt>
                        <dd>￥
                            <del>169.00</del>
                            <span>16.90元/500g</span></dd>
                    </dl>
                </div>
                <dl class="freight">
                    <dt>运费</dt>
                    <dd><span>大连</span> 至
                        <div class="fre-target">
                            <a href="javascript:;">大连市开发区</a>
                            <ul style="display: none;">
                                <li>大连市甘井子区</li>
                                <li>大连市开发区</li>
                                <li>大连市旅顺口区</li>
                                <li>大连市沙河口区</li>
                                <li>大连市西岗区</li>
                                <li>大连市中山区</li>
                            </ul>
                        </div>
                        <span>快递：13.00</span></dd>
                </dl>
                <script>
                    $(".fre-target").click(function () {
                        $(this).find("ul").toggle();
                        $(this).find("li").click(function () {
                            $(".fre-target > a").text($(this).text());
                        });
                    })
                </script>
                <ul class="count-total">
                    <li>月销量<span>{{g.goodsdetail_set.first.sales}}</span></li>
                    <li>累计评价<span>{{g.goodsdetail_set.first.evaluate}}</span></li>
                    <li>送芙佳积分<span>{{g.integral}}</span></li>
                </ul>
                <dl class="pro-stock">
                    <dt>数量</dt>
                    <dd>
                        <input class="pro-number" type="text" value="1"/>
                        <span class="cho-number"> <span class="pro-add"><img src="/static/img/detail/ico-add-number.gif"
                                                                             width="19" height="13"
                                                                             alt=""/></span> <span class="pro-red"><img
                                src="/static/img/detail/ico-red-number.gif" width="19" height="13" alt=""/></span> </span> 件
                        <span class="stock-total">库存{{g.num}}件</span></dd>
                </dl>
                <script>
                    $(document).ready(function () {
                        $(".pro-add").click(function () {
                            var getVal = parseInt($(this).parent().prev().val());
                            $(this).parent().prev().val(getVal + 1);
                        });
                        $(".pro-red").click(function () {
                            var getVal = $(this).parent().prev().val();
                            if (getVal > 1) {
                                $(this).parent().prev().val(getVal - 1);
                            }
                        });
                    })
                </script>
                <div class="buy-cart">
                    <a class="buy" href="{% url 'fruitmall:settlement' %}">立刻购买</a>
                    <a class="cart" href="javascript:;">加入购物车</a>
                </div>
                <script>
                    $(document).ready(function () {
                        $(".cart").click(function () {
                            if ($(".pro-simu-cart").length == 0) {
                                $(this).parent().before("<div class='pro-simu-cart'><span class='close-simu-cart'>X</span><p class='add-cart-success'>加入购物车成功!!</p><p class='add-cart-faild'>加入购物车失败!!</p><p class='operation-cart'><span class='continue-buy'>继续购物</span><a class='go-settlement' href='settlement.html'>去结算</a></p></div>")
                                $(".close-simu-cart").click(function () {
                                    $(this).parent().remove();
                                });
                                $(".continue-buy").click(function () {
                                    $(this).parent().parent().remove();
                                });
                            }
                        })
                    })
                </script>
            </div>
            <div style="clear: both;"></div>
            {% endfor %}
        </div>
        <div class="goods-evaluation">
            {% for g in goods %}
            <h1><a href=".goods-details" class="tab-detail active">商品详情</a><a href=".total-evaluation" class="tab-evaluation">累计评价{{g.goodsdetail_set.first.evaluate}}</a></h1>
            <script>
                $(".goods-evaluation h1 a").click(function () {
                    $(this).addClass("active").siblings().removeClass("active");
                    $(this).parent().siblings().css("display", "none");
                    var getTarget = $(this).attr("href");
                    $(getTarget).css("display", "block");
                    return false;
                })
            </script>
            <div class="goods-details">
                <ul class="goods-para">
                    <li title="生产许可证编号：330118010649">生产许可证编号：00{{g.id}}</li>
                    <li title="配料表：{{g.name}}">配料表：{{g.name}}</li>
                    <li title="储藏方法：冷藏">储藏方法：冷藏</li>
                    <li title="保质期：30 天">保质期：30 天</li>
                    <li title="食品添加剂：无">食品添加剂：无</li>
                    <li title="包装方式: 包装">包装方式: 包装</li>
                    <li title="重量(g): {{g.wight}}">重量(g): {{g.wight}}</li>
                    <li title="热卖时间: 1月 2月 3月 4月 5月 6月 7月 8月 9月 ">热卖时间: 1月 2月 3月 4月 5月 6月 7月 8月 9月</li>
                    <li title="产地: 中国大陆">产地: 中国大陆</li>
                    <li title="价格: {{g.price}}元">价格: {{g.price}}元</li>
                    <li title="种类: {{g.desc}}">种类: {{g.desc}}</li>
                </ul>
                <p class="goods-img"><img src="/media/{{g.goodsdetail_set.first.img}}" width="760" height="465" alt="苹果"/>
                </p>
                <p class="goods-text">{{g.goodsdetail_set.first.body}}</p>
                <p class="goods-img"><img src="/media/{{g.goodsdetail_set.first.img}}" width="760" height="465" alt="苹果"/>
                </p>
            </div>
            <div class="total-evaluation">
                <ul>
                    {% for i in page.object_list %}
                        <li>
                            <p class="eval-content">{{i.content}}</p>
                            <p class="eval-time">{{i.create_time}}</p>
                            <p class="eval-people">{{i.name}}</p>
                        </li>
                    {% endfor %}
                </ul>
                <div class="page-list">
                    <p>
                        {% if page.has_previous %}
                            <span> <a href="?page={{page.previous_page_number}}">&lt;上一页</a></span>
                        {% endif %}

                        {% for i in page.paginator.page_range %}
                            {% if i == page.number %}
                                <span class="page-active"><a href="?page={{i}}">{{i}}</a></span>
                            {% else %}
                                <span><a href="?page={{i}}">{{i}}</a></span>
                            {% endif %}
                        {% endfor %}

                        {% if page.has_next %}
                            <span><a href="?page={{page.next_page_number}}">下一页&gt;</a></span>
                        {% endif %}
                    </p>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="recommend">
            <h1 class="title">掌柜推荐</h1>
            <div class="rec-slider">
                <ul>
                    {% for g in goods %}
                        <li>
                            <p class="recom-img"><a href="{% url 'fruitmall:details' g.id %}"><img src="/media/{{g.img}}" alt="猕猴桃" width="163" height="153"/> <span></span> </a></p>
                            <p class="recom-name"><a href="{% url 'fruitmall:details' g.id %}">{{g.name}}（新品上市）</a></p>
                            <p class="recom-price">￥{{g.price}}/斤</p>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <p class="recommend-tab">
                <span class="recommend-prev">&lt;</span>
                <span class="recommend-next">&gt;</span>
            </p>
        </div>
    </div>
</div>
{% endblock %}

